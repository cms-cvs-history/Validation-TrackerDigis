process PROD = {

	source = PoolRASource { 
          untracked vstring fileNames = {'file:/afs/cern.ch/cms/data/CMSSW/Validation/TrackerDigis/data/MuonSimHit.root'}
          untracked int32 maxEvents = -1
          untracked uint32 debugVebosity = 10
          untracked bool   debugFlag     = true
	}

        include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
        include "SimTracker/SiStripDigitizer/data/SiStripDigi.cfi"
        include "SimTracker/SiPixelDigitizer/data/PixelDigi.cfi"
        #Geometry
        #
        #include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"

        es_source = XMLIdealGeometryESSource
        {
             FileInPath GeometryConfiguration="Geometry/TrackerSimData/data/trackerSimConfiguration.xml"
             string rootNodeName = ""
        }

        es_module = TrackerGeometricDetESModule {}
        es_module = TrackerDigiGeometryESModule {}

        module stripvalid = SiStripDigiValid {
          untracked string outputFile = 'stripdigihisto.root'
          untracked bool verbose = true
        }

        module pixelvalid  = SiPixelDigiValid {
          untracked string outputFile = 'pixeldigihisto.root'
        }



        module out = PoolOutputModule {
               untracked string fileName = 'trackerdigi.root'
        }

       service = MessageLogger {
                    vstring destinations   = { "debugmessages.txt" }
                    PSet debugmessages.txt = { string threshold = "DEBUG"}
        }

       service = DaqMonitorROOTBackEnd{ }         
                                                                                                    
	path p = {stripdigi,pixdigi,stripvalid, pixelvalid}
}

